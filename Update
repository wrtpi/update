#!/bin/bash
# 之前被Windows编辑符号^M搞死！！！
# wget -qO- https://git.io/VPS.sh | bash
echo "----------------------------------------------------------------------"
echo "请更新系统密码"
sleep 2
echo "----------------------------------------------------------------------"
# 提示用户输入新密码
read -s -p "Enter new password: " new_password
echo

# 提示用户再次输入新密码进行确认
read -s -p "Confirm new password: " confirm_password
echo

# 检查两次输入的密码是否一致
if [ "$new_password" != "$confirm_password" ]; then
  echo "Passwords do not match. Please try again."
  exit 1
fi

# 根据不同的发行版选择对应的命令更新密码
if [ -x "$(command -v passwd)" ]; then
  # Ubuntu
  echo "root:$new_password" | passwd --stdin root
else
  # CentOS
  echo "root:$new_password" | chpasswd
fi

# 检查密码更新是否成功
if [ $? -eq 0 ]; then
  echo "Password updated successfully."
else
  echo "Failed to update password."
fi
#⭐️#
echo "----------------------------------------------------------------------"
echo "Set up IPV6 DNS resolution IPv4 DomainName"
sleep 2
##mv /etc/resolv.conf /etc/resolv.conf.bak && echo -e "nameserver 2001:67c:2b0::4\nnameserver 2001:67c:2b0::6" > /etc/resolv.conf
mv /etc/resolv.conf /etc/resolv.conf.bak && echo -e "nameserver 2001:67c:2b0::4\nnameserver 2001:67c:2b0::6\nnameserver 8.8.8.8\nnameserver 1.1.1.1" > /etc/resolv.conf
#⭐️#
echo "----------------------------------------------------------------------"
echo "更新软件包列表 升级已安装的软件包"
sleep 2
apt-get update
#sudo apt-get update && sudo apt-get upgrade -y
echo "----------------------------------------------------------------------"
sleep 2
echo "安装常用工具"
apt install curl wget unzip htop screen ffmpeg net-tools iputils-ping vim neovim nano -y
#⭐️#apt install curl wget unzip htop screen ffmpeg net-tools iputils-ping vim neovim nano
#apt install curl wget unzip htop screen ffmpeg net-tools iputils-ping vim neovim nano -qq
echo "----------------------------------------------------------------------"
#⭐️#
echo "安装命令工具"
curl https://croc.889.pp.ua | bash
echo "----------------------------------------------------------------------"
#⭐️#
echo "设置时区为亚洲/上海"
timedatectl set-timezone Asia/Shanghai
#⭐️# 显示系统当前查看时间和时区
timedatectl
echo "----------------------------------------------------------------------"
echo "一键设置Linux终端支持中文显示"
sleep 2
wget -N --no-check-certificate https://raw.githubusercontent.com/wrtpi/zh_CN/master/zh_CN.sh && bash zh_CN.sh
echo "----------------------------------------------------------------------"
echo "显示系统当前使用的IP和地区"
#⭐️# 显示系统当前使用的IP和地区
curl cip.cc
echo "----------------------------------------------------------------------"
sleep 2
#⭐️#
echo "安装开源的Docker容器化相关组件"
sleep 2
curl -fsSL https://get.docker.com -o get-docker.sh  && sh get-docker.sh
#
echo "----------------------------------------------------------------------"
echo "系统即将完成初始化设置！"
echo "----------------------------------------------------------------------"
#⭐️#
echo "给系统增加SWAP虚拟分区文件，文件大小可以自己输入，默认可以是1024MB！"
sleep 2
echo -e "1\n1024" | bash <(curl -s -L https://raw.githubusercontent.com/wrtpi/addswap/main/addswap.sh)
#⭐️#
echo "----------------------------------------------------------------------"
echo "系统初始化设置命令执行完毕！"
echo "----------------------------------------------------------------------"
#⭐️#
echo "----------------------------------------------------------------------"
echo "下面开始 测试系统性能和测试网速！"
echo "----------------------------------------------------------------------"
#⭐️#
sleep 3
wget -qO- bench.sh | bash
#
#wget -qO- https://git.io/VPS.sh | bash
echo "----------------------------------------------------------------------"
echo "系统初始化设置命令执行完毕！"
##########################################################
#⭐️#
